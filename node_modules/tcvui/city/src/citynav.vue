<template>
        <ul :style="{display:isOpen?'none':'block'}" v-if="!mode">
            <li
            v-if="index==0"
           :class="this.checktTitle(-1)" 
           :style="{lineHeight:liHeight+'px'}"
           @touchstart = "citynavTouchStart(-1)"
           @touchend = "citynavTouchEnd(-1)"
           @click = "citynavClick(-1)"
           >当前<span>当前</span></li>           
           <li v-for="(obj,i) in cityNavObjArray"
                      :style="{lineHeight:liHeight+'px'}"
                      :class="checkTitle(i)"
                      @touchstart = "citynavTouchStart(i)"
                      @touchend = "citynavTouchEnd(i)"
                      @click="citynavClick(i)"
                    >{{obj}}<span>{{obj}}</span></li>
      
           
        </ul>
</template>
<script>
import {windowHeight,windowWidth} from '../../utils/dom';
export default {
   name: 'CityNav',
   data (){
     return {
        currentIndex:null,
        liHeight:0,
     }
  },
  beforeMount(){

     let length = this.cityNavObjArray.length + (this.index==0?1:0);
       
     let WHeight = windowHeight() - 62;
     let _liHeight = (WHeight / length);
                this.liHeight = _liHeight < 15 ? 15 : _liHeight;
                this.liHeight = _liHeight > 35 ? 35 : _liHeight;
  },
   mounted(){

   },
  props:{
    isOpen:{
      default: false,
      type:Boolean
    },
    mode:{
      default: 'asRequired',
    },
    index:{
      default: 0,
      type:Number
    },
    cityNavObjArray:Array,
    scrollAnimate:{
      type:Function,
      default:()=>{}
    }
  },
  methods:{
      checkTitle (i){
        return i===this.currentIndex ? "nav-active" : "";
      },
      checktTitle (i){
        return i===this.currentIndex ? "av-city-dw nav-active" : "av-city-dw";
      },
      citynavTouchStart(i){
        this.currentIndex = i;
      },
       citynavTouchEnd(){
          this.currentIndex = null;
      
       },
      citynavClick (i){
        this.scrollAnimate(i,this.index)
      }
  }
}
</script>