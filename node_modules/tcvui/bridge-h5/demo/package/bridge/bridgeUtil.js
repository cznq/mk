import bridge from './bridge.js'
const dfn = '_tc_ntv_util';

var util = {
    getData(param){
        if(!param){
            return;
        }
        let promise,
            cfn = 'get_data';
        promise = new Promise(function(resolve, reject) {
            function callback (cdata){
                resolve(cdata)
            }
            let ob = {
                param:{
                    ...param
                },
                version:700,
                callback:callback
            };
            if(bridge.platform == 'tc'){
                bridge.sendAction(ob,dfn,cfn);
            }else{
                reject()
            }
            
                //reject(error);
        });
        return promise
    }
};

let config = {  // n:实际调用native方法名 v：支持版本 ep：是否允许空参数
    setEvent:{
        n:'set_event',v:700
    },
    callTel:{
        n:'call_tel', v:815 
    },
    setPage:{
        n:'set_page', v:700 
    },
    setCategoryEvent:{
        n:'set_category_event', v:710 
    },
    showDialog:{
        n:'show_dialog', v:700 
    },
    uploadPhoto:{
        n:'upload_photo', v:710 
    },
    keywordSearch:{
        n:'keyword_search', v:710 
    },
    setCity:{
        n:'set_city', v:710 
    },
    setWebviewInfo:{
        n:'set_webview_info', v:710,av:802
    },
    showTipsDialog:{
        n:'show_tips_dialog', v:720
    },
    network:{
        n:'get_network_type', v:720
    },
    setAlarm:{
        n:'set_alarm_info',
        v:720
    },
    getAlarm:{
        n:'set_alarm_info',
        v:720
    },
    cancelAlarm:{
        n:'cancel_alarm_info',
        v:720
    },
    showToast:{
        n:'show_toast',
        v:730
    },
    flashDialog:{
        n:'show_flash_dialog',
        v:730
    },
    choosePhoto:{
        n:'choose_photo',
        v:750
    },
    onlineDialog:{
        n:'show_online_dialog',
        v:751
    },
    onlineEntry:{
        n:'check_online_entry',
        v:751
    },
    setWxCardCoupon:{
        n:'set_weixin_cardcoupon',
        v:751
    },
    checkPackages:{
        n:'check_installed_packages',
        av:753,
        v: -1
    },
    scan:{
        n:'scan',
        v:804
    },
    cropper:{
        n:'crop_photo',
        v:804
    },
    qrCode:{
        n:'create_qrimage',
        v:806
    },
    getAppInfo:{
        n:'get_app_info',
        v:806,
        ep:1
    },
    getIndexConfig:{
        n:'get_index_config',
        v:810
    },
    getStorage:{
        n:'get_webapp_cache',
        v:811
    },
    setStorage:{
        n:'set_webapp_cache',
        v:811
    },
    setClipboard:{
        n:'set_clipboard',
        v:812
    },
    getClipboard:{
        n:'get_clipboard',
        v:812
    },
    screenShot:{
        n:'capture_webview_img',
        v:814,
        uncode:814
    },

}
bridge.registerFn(util,config,dfn)

export default util;